# FFX Project Makefile

SCRIPT     := ffx
INSTALLDIR := /usr/local/bin
TESTS      := merge_test.bats

.PHONY: all install uninstall test lint clean help

all: help

install: # Install the script to the system
	@echo "üì¶ Installing $(SCRIPT) to $(INSTALLDIR)..."
	@chmod +x $(SCRIPT)
	@sudo cp -f $(SCRIPT) $(INSTALLDIR)/
	@echo "‚úÖ Installed successfully!"

uninstall: # Remove the installed script
	@echo "üóëÔ∏è  Removing $(INSTALLDIR)/$(SCRIPT)..."
	@sudo rm -f $(INSTALLDIR)/$(SCRIPT)
	@echo "‚úÖ Uninstalled successfully!"

test: # Run BATS tests
	@echo "üß™ Running BATS tests..."
	@bats $(TESTS)

lint: # Run shellcheck on the script
	@echo "üîç Running shellcheck..."
	@shellcheck $(SCRIPT)

clean: # Remove temporary and output files
	@echo "üßπ Cleaning up temp files..."
	@rm -f *.tmp *.log *.mp4
	@rm -rf tmp/
	@echo "‚úÖ Cleaned."

help: # Show this help message
	@echo "FFX Project Makefile"
	@echo "===================="
	@echo "make install      Install ffx to $(INSTALLDIR)"
	@echo "make uninstall    Remove installed ffx"
	@echo "make test         Run all BATS tests"
	@echo "make lint         Run shellcheck on ffx"
	@echo "make clean        Remove temp/output files"
	@echo "make help         Show this help"
